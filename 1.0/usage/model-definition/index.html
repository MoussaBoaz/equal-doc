
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://doc.equal.run/1.0/usage/model-definition/">
      
      <link rel="icon" href="../../assets/img/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Model Definition - eQual framework documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#model-definition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="eQual framework documentation" class="md-header__button md-logo" aria-label="eQual framework documentation" data-md-component="logo">
      
  <img src="../../assets/img/eq_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            eQual framework documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Model Definition
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cedricfrancoys/equal" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    equal
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Welcome
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/installation/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../architecture-concepts/http-native/" class="md-tabs__link">
        Architecture Concepts
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../built-in-tools/" class="md-tabs__link md-tabs__link--active">
        Usage
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../howtos-and-examples/generic-cheat-sheet/" class="md-tabs__link">
        How-Tos & Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../advanced/security/" class="md-tabs__link">
        Advanced
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../contact-and-support/contact/" class="md-tabs__link">
        Contact & Support
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="eQual framework documentation" class="md-nav__button md-logo" aria-label="eQual framework documentation" data-md-component="logo">
      
  <img src="../../assets/img/eq_logo.png" alt="logo">

    </a>
    eQual framework documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cedricfrancoys/equal" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    equal
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Welcome
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Welcome" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Welcome
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Prologue
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../welcome/release-notes/" class="md-nav__link">
        Release notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../welcome/contribution-guide/" class="md-nav__link">
        Contribution Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quick-start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Architecture Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Architecture Concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Architecture Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-concepts/http-native/" class="md-nav__link">
        HTTP native
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-concepts/services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-concepts/orm/" class="md-nav__link">
        ORM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-concepts/collections/" class="md-nav__link">
        Collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-concepts/dependency-injection/" class="md-nav__link">
        Dependency injection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-concepts/domains/" class="md-nav__link">
        Domains
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-concepts/operations/" class="md-nav__link">
        Operations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../built-in-tools/" class="md-nav__link">
        Built-in tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../directory-structure/" class="md-nav__link">
        Directory Structure
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Model Definition
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Model Definition
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consistency-with-database" class="md-nav__link">
    Consistency with Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-categories" class="md-nav__link">
    Fields categories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-types" class="md-nav__link">
    Fields types 
  </a>
  
    <nav class="md-nav" aria-label="Fields types ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boolean" class="md-nav__link">
    boolean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer" class="md-nav__link">
    integer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#float-double" class="md-nav__link">
    float (double)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#text" class="md-nav__link">
    text
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary" class="md-nav__link">
    binary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#date-time-datetime" class="md-nav__link">
    date, time &amp; datetime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#many2one" class="md-nav__link">
    many2one
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one2many" class="md-nav__link">
    one2many
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#many2many" class="md-nav__link">
    many2many
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computed" class="md-nav__link">
    computed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-properties" class="md-nav__link">
    Fields properties
  </a>
  
    <nav class="md-nav" aria-label="Fields properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-properties" class="md-nav__link">
    Common properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-related-properties" class="md-nav__link">
    Type-related properties
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-fields" class="md-nav__link">
    System fields
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getters-methods" class="md-nav__link">
    Getters methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overridable-methods" class="md-nav__link">
    Overridable methods
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/" class="md-nav__link">
        Controllers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../crud/" class="md-nav__link">
        CRUD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../searching/" class="md-nav__link">
        Searching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validation/" class="md-nav__link">
        Validation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        Routing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views/" class="md-nav__link">
        Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../i18n/" class="md-nav__link">
        i18n
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../error-handling/" class="md-nav__link">
        Error Handling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          How-Tos & Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="How-Tos & Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          How-Tos & Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../howtos-and-examples/generic-cheat-sheet/" class="md-nav__link">
        Generic Cheat Sheet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../howtos-and-examples/basic-controller/" class="md-nav__link">
        Basic Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../howtos-and-examples/rest-api/" class="md-nav__link">
        ReST API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../howtos-and-examples/basic-webapp/" class="md-nav__link">
        Basic WebApp
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/security/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/remote-apis/" class="md-nav__link">
        Remote APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/cascade-configuration/" class="md-nav__link">
        Cascade Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/ci-cd/" class="md-nav__link">
        CI/CD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/external-libraries/" class="md-nav__link">
        External libraries
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Contact & Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contact & Support" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Contact & Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contact-and-support/contact/" class="md-nav__link">
        Contact
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contact-and-support/support/" class="md-nav__link">
        Support
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consistency-with-database" class="md-nav__link">
    Consistency with Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-categories" class="md-nav__link">
    Fields categories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-types" class="md-nav__link">
    Fields types 
  </a>
  
    <nav class="md-nav" aria-label="Fields types ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boolean" class="md-nav__link">
    boolean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer" class="md-nav__link">
    integer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#float-double" class="md-nav__link">
    float (double)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#text" class="md-nav__link">
    text
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary" class="md-nav__link">
    binary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#date-time-datetime" class="md-nav__link">
    date, time &amp; datetime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#many2one" class="md-nav__link">
    many2one
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one2many" class="md-nav__link">
    one2many
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#many2many" class="md-nav__link">
    many2many
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computed" class="md-nav__link">
    computed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-properties" class="md-nav__link">
    Fields properties
  </a>
  
    <nav class="md-nav" aria-label="Fields properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-properties" class="md-nav__link">
    Common properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-related-properties" class="md-nav__link">
    Type-related properties
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-fields" class="md-nav__link">
    System fields
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getters-methods" class="md-nav__link">
    Getters methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overridable-methods" class="md-nav__link">
    Overridable methods
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="model-definition">Model definition<a class="headerlink" href="#model-definition" title="Permanent link">&para;</a></h1>
<p>Each Model is defined in a <code>.class.php</code> file , located in the <code>/packages/{package_name}/classes</code> file of the package it relates to (see <a href="../directory-structure/">Directory Structure</a>). All classes inherit from a common ancestor: the <code>Model</code> class, declared in the <code>equal\orm</code> namespace and defined in  <code>/lib/equal/orm/Model.class.php</code>.</p>
<p>A class is always referred to as an <strong>entity</strong> and belongs to a package. Packages and their subdirectories are used as namespaces.</p>
<p>The syntax is : <code>{{package_name}}\{{class_name}}</code> (ex. :<code>core\setting\SettingValue</code>).</p>
<p>A class consists of a series of fields definition, along with specific methods.</p>
<p>Here is an example of a <code>Category</code> class having multiple fields for which we will then show how to write its <code>Form View</code> and <code>List View</code>.</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span> 
<span class="k">class</span> <span class="nc">Category</span> <span class="k">extends</span> <span class="nx">Model</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getColumns</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
          <span class="s1">&#39;type&#39;</span>              <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
          <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;Name of the category (for all variants).&quot;</span><span class="p">,</span>
          <span class="s1">&#39;required&#39;</span>          <span class="o">=&gt;</span> <span class="k">true</span>
        <span class="p">],</span>

        <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
          <span class="s1">&#39;type&#39;</span>              <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
          <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;A few details about category purpose and usage.&quot;</span>
        <span class="p">],</span>

        <span class="s1">&#39;product_models_ids&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span> 
          <span class="s1">&#39;type&#39;</span>              <span class="o">=&gt;</span> <span class="s1">&#39;many2many&#39;</span><span class="p">,</span> 
          <span class="s1">&#39;foreign_object&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;sale\catalog\ProductModel&#39;</span><span class="p">,</span> 
          <span class="s1">&#39;foreign_field&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;categories_ids&#39;</span><span class="p">,</span> 
          <span class="s1">&#39;rel_table&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;sale_product_rel_productmodel_category&#39;</span><span class="p">,</span> 
          <span class="s1">&#39;rel_foreign_key&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;productmodel_id&#39;</span><span class="p">,</span>
          <span class="s1">&#39;rel_local_key&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;category_id&#39;</span><span class="p">,</span>
          <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;List of product models assigned to the category.&#39;</span>
        <span class="p">]</span>

      <span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="classes">Classes<a class="headerlink" href="#classes" title="Permanent link">&para;</a></h2>
<p>Objects are grouped into classes that define the structure and methods of those objects. </p>
<p>Classes definitions from a same package are placed into the folder <code>//packages/[package_name]/classes//.</code></p>
<p>Here is an example of the class definition syntax :
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">school</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">equal\orm\Model</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Student</span> <span class="k">extends</span> <span class="nx">Model</span> <span class="p">{</span>
  <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getColumns</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
      <span class="s1">&#39;firstname&#39;</span>  <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">],</span>
      <span class="s1">&#39;lastname&#39;</span>   <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">],</span>
      <span class="s1">&#39;birthdate&#39;</span>  <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;date&#39;</span><span class="p">]</span>
    <span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="consistency-with-database">Consistency with Database<a class="headerlink" href="#consistency-with-database" title="Permanent link">&para;</a></h2>
<p>Classes are mapped with database tables. Each table having structure (columns) matching the fields defined in the model. </p>
<p>Consistency between models (<code>*.class.php</code> files) and database schema is done at package initialization (columns types must be compatible). It must be maintained manually in case of change.</p>
<p>When a new class is created or the schema of a class is modified, the SQL schema must be adapted consequently. Controllers <code>core_init_package</code> and <code>utils_sql-schema</code> are made to help with this task.</p>
<p>Also, Action controller <code>core_test_package-consistency</code> can help to spot any incompatibility or inconsistency in the definition the classes from a given package.</p>
<h2 id="fields-categories">Fields categories<a class="headerlink" href="#fields-categories" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th><strong>CATEGORY</strong></th>
<th><strong>DESCRIPTION</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>simple</td>
<td>Direct field that holds a value of a given type. Such fields are stored as is in database and are automatically converted (SQL/PHP).</td>
</tr>
<tr>
<td>relational</td>
<td>Field whose value targets one or more objects. Supported relations are : <code>one2many</code>, <code>many2many</code>, and <code>many2one</code> (which behaves like a simple field)</td>
</tr>
<tr>
<td>computed</td>
<td>Indirect field that results from a computation based on other values. Computed fields have a final type that can be either simple or relational.</td>
</tr>
</tbody>
</table>
<h2 id="fields-types">Fields types <a id="definition_field_types"></a><a class="headerlink" href="#fields-types" title="Permanent link">&para;</a></h2>
<p>The type property sets the type of the field.</p>
<p>The following types are supported by the ORM : </p>
<ul>
<li><code>boolean</code></li>
<li><code>integer</code></li>
<li><code>float</code></li>
<li><code>string</code></li>
<li><code>text</code></li>
<li><code>date</code></li>
<li><code>time</code></li>
<li><code>datetime</code></li>
<li><code>binary</code></li>
<li><code>many2one</code></li>
<li><code>one2many</code></li>
<li><code>many2many</code></li>
<li><code>computed</code></li>
<li><code>alias</code></li>
</ul>
<div class="admonition note">
<p class="admonition-title">usage property</p>
<p>The <code>usage</code> property is complementary to the <code>type</code> property and allows to refine the way the field should be handled by the ORM and the DBMS, and how it should be rendered in the UI. </p>
</div>
<h4 id="boolean">boolean<a class="headerlink" href="#boolean" title="Permanent link">&para;</a></h4>
<p>Numeric value of Boolean type (<strong>true</strong> or <strong>false</strong>)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For booleans, we use the PHP built-in constant : true and false (when using '0', '1', 0 or 1, value is converted to a bool).</p>
</div>
<h4 id="integer">integer<a class="headerlink" href="#integer" title="Permanent link">&para;</a></h4>
<p>Signed numeric value (negative or positive).</p>
<p>By default, strings are stored in DBMS using <code>INT(11)</code>.</p>
<div class="admonition note">
<p class="admonition-title">about integer precision</p>
<p>PHP depends on the platform for integers size allocation (<code>PHP_INT_SIZE</code>), while SQL <code>INT</code> will always be 32 bits.</p>
</div>
<h4 id="float-double">float (double)<a class="headerlink" href="#float-double" title="Permanent link">&para;</a></h4>
<p>Floating point numeric value (float or double)</p>
<p>By default, strings are stored in DBMS using <code>DECIMAL(10,2)</code>.</p>
<h4 id="string">string<a class="headerlink" href="#string" title="Permanent link">&para;</a></h4>
<p>Short string without formatting/carriage returns (ex: lastname, place, …)</p>
<p>By default, strings are stored in DBMS using <code>VARCHAR(255)</code>.</p>
<p>Strings can potentially be long and include formatting, and some behavior require a specific combination of type and usage.</p>
<p>For instance:
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="p">[</span>
    <span class="s1">&#39;type&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
    <span class="s1">&#39;usage&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text/plain&#39;</span>
<span class="p">]</span>
</code></pre></div>
will be stored as MEDIUMTEXT and the UI will know it has to display the field as a TEXTAREA rather than as an INPUT.</p>
<p>whereas :</p>
<p><div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="p">[</span>
    <span class="s1">&#39;type&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
    <span class="s1">&#39;usage&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;phone&#39;</span>
<span class="p">]</span>
</code></pre></div>
will be stored as <code>VARCHAR(20)</code>.</p>
<h4 id="text">text<a class="headerlink" href="#text" title="Permanent link">&para;</a></h4>
<p>By default, texts are stored in DMBS as <code>text</code>.</p>
<p>The TEXT data type has a size of string characters upto 65,535 bytes to manage classic long-form contents of the text.</p>
<h4 id="binary">binary<a class="headerlink" href="#binary" title="Permanent link">&para;</a></h4>
<p>Any binary value (ex : a picture, a document, …)</p>
<p>Binary values can either be stored in the database or within the filesystem, under the <code>/bin</code> folder of the installation.</p>
<p>This behavior can be set using the <code>FILE_STORAGE_MODE</code> and <code>FILE_STORAGE_DIR</code> configuration parameter.</p>
<h4 id="file">file<a class="headerlink" href="#file" title="Permanent link">&para;</a></h4>
<p>A file value is stored in the DB (like binaries) as a <code>LONGBLOB</code>.</p>
<h4 id="date-time-datetime">date, time &amp; datetime<a class="headerlink" href="#date-time-datetime" title="Permanent link">&para;</a></h4>
<p>When stored to the DBMS, those types follow the standard SQL format:</p>
<ul>
<li>date: YYYY-mm-dd</li>
<li>time: HH:mm:ss</li>
<li>datetime: YYYY-mm-dd HH:mm:ss</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Internally, dates, times and datetimes are handled as timestamps. These are adapted to SQL format or JSON format when needed.</p>
</div>
<h4 id="many2one">many2one<a class="headerlink" href="#many2one" title="Permanent link">&para;</a></h4>
<p>Relational field used for fields holding a N-1 relation. The stored value is an integer that holds the identifier of the pointed object.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="c1">// from todolist\Task</span>
<span class="c1">// Each task has only 1 user assigned at a time</span>
<span class="s1">&#39;user_id&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;type&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;many2one&#39;</span><span class="p">,</span>
    <span class="s1">&#39;foreign_object&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;todolist\User&#39;</span>
<span class="p">]</span>
</code></pre></div>
<h4 id="one2many">one2many<a class="headerlink" href="#one2many" title="Permanent link">&para;</a></h4>
<p>1-N relation, related to a many2one object</p>
<div class="codehilite"><pre><span></span><code>    foreign_object -&gt; 
    foreign_field -&gt; select amongst fields of other class
            + ability to create a new one (many2many) : 
            temporary creation in one of both ways !
    rel_table -&gt; check amongst existing rel tables 
    ({package}_rel_local_foreign or rel_foreign_local)
            if no table yet -&gt; create
    rel_local_key -&gt; {local_class}_id
    rel_foreign_key -&gt; {foreign_class}_id
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="c1">// todolist\User</span>
<span class="c1">// Each user can have many tasks</span>
<span class="s1">&#39;tasks_ids&#39;</span>  <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;type&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;one2many&#39;</span><span class="p">,</span>
    <span class="s1">&#39;foreign_object&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;todolist\Task&#39;</span><span class="p">,</span>
    <span class="s1">&#39;foreign_field&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;user_id&#39;</span>
<span class="p">]</span>
</code></pre></div>
<h4 id="many2many">many2many<a class="headerlink" href="#many2many" title="Permanent link">&para;</a></h4>
<p>M-N relation</p>
<div class="codehilite"><pre><span></span><code>foreign_object -&gt; select amongst other classes
    + ability to create symetrical one (one2many)
</code></pre></div>

<p><code>php
&lt;?php
// school\Teacher
'courses_ids' =&gt; [
    'type'            =&gt; 'many2many', 
    'foreign_object'  =&gt; 'school\Course', 
    'foreign_field'   =&gt; 'teachers_ids', 
    'rel_table'       =&gt; 'school_rel_course_teacher', 
    'rel_foreign_key' =&gt; 'course_id', 
    'rel_local_key'   =&gt; 'teacher_id'
]</code></p>
<h4 id="computed">computed<a class="headerlink" href="#computed" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>type: &#39;computed&#39;
function: string holding name of a callable method
result_type : select (&#39;boolean&#39;, &#39;integer&#39;, &#39;float&#39;, &#39;string&#39;, &#39;text&#39;, &#39;html&#39; )
store : boolean
</code></pre></div>

<p>Computed fields are not stored in the DB, unless the <code>store</code> attribute is set to true.</p>
<p>To get it,  we use the 'function' key, that will point at any function.</p>
<p>It will return a processed value and afterwards, it can be stored inside the DB.</p>
<blockquote>
<p>Most of the time the use of the store attribute requires that field(s) on which depends the computed value, has an onchange event, triggering the update of the calculated field (see example). </p>
</blockquote>
<p>When trying to load a computed field, </p>
<ul>
<li>if 'store' is not defined or set to false, it computes the value using the provided method each time the field value is requested</li>
<li>if 'store' is set to true and the field isn't in the DB (NULL), it computes the value using the provided method</li>
<li>if 'store' is set to true and the field is in the DB, it uses the DB value</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="c1">// Example from core\Permission</span>
<span class="c1">// ...</span>
    <span class="s1">&#39;rights&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;type&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
        <span class="s1">&#39;onupdate&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;onchangeRights&#39;</span>
    <span class="p">],</span>
    <span class="s1">&#39;rights_txt&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;type&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;computed&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;store&#39;</span>        <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> 
        <span class="s1">&#39;result_type&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;function&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;calcRightsTxt&#39;</span>
    <span class="p">],</span>
<span class="c1">// ...</span>


<span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">onupdateRights</span><span class="p">(</span><span class="nv">$om</span><span class="p">,</span> <span class="nv">$ids</span><span class="p">,</span> <span class="nv">$values</span><span class="p">,</span> <span class="nv">$lang</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$om</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">(</span><span class="no">__CLASS__</span><span class="p">,</span> <span class="nv">$oids</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;rights_txt&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$lang</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">calcRightsTxt</span><span class="p">(</span><span class="nv">$om</span><span class="p">,</span> <span class="nv">$ids</span><span class="p">,</span> <span class="nv">$lang</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$values</span> <span class="o">=</span> <span class="nv">$om</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">(</span><span class="s1">&#39;core\Permission&#39;</span><span class="p">,</span> <span class="nv">$ids</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;rights&#39;</span><span class="p">),</span> <span class="nv">$lang</span><span class="p">);</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$ids</span> <span class="k">as</span> <span class="nv">$oid</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$rights_txt</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="nv">$rights</span> <span class="o">=</span> <span class="nv">$values</span><span class="p">[</span><span class="nv">$oid</span><span class="p">][</span><span class="s1">&#39;rights&#39;</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$rights</span> <span class="o">&amp;</span> <span class="nx">QN_R_CREATE</span><span class="p">)</span>   <span class="nv">$rights_txt</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;create&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$rights</span> <span class="o">&amp;</span> <span class="nx">QN_R_READ</span><span class="p">)</span>     <span class="nv">$rights_txt</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;read&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$rights</span> <span class="o">&amp;</span> <span class="nx">QN_R_WRITE</span><span class="p">)</span>    <span class="nv">$rights_txt</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;write&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$rights</span> <span class="o">&amp;</span> <span class="nx">QN_R_DELETE</span><span class="p">)</span>   <span class="nv">$rights_txt</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;delete&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$rights</span> <span class="o">&amp;</span> <span class="nx">QN_R_MANAGE</span><span class="p">)</span>   <span class="nv">$rights_txt</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;manage&#39;</span><span class="p">;</span>
        <span class="nv">$res</span><span class="p">[</span><span class="nv">$oid</span><span class="p">]</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$rights_txt</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$res</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="fields-properties">Fields properties<a class="headerlink" href="#fields-properties" title="Permanent link">&para;</a></h2>
<h4 id="common-properties">Common properties<a class="headerlink" href="#common-properties" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th><strong>PROPERTY</strong></th>
<th><strong>DESCRIPTION</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>The type of field:  one of the value listed as <a href="#definition_field_types">fields types</a>.</td>
</tr>
<tr>
<td>usage</td>
<td>(string) Specifies additional information about the format of the field.</td>
</tr>
<tr>
<td>description</td>
<td>(string) Brief about the field (max 65 chars).</td>
</tr>
<tr>
<td>visible</td>
<td>(optional, boolean | array) <a href="../../architecture-concepts/domains/">Domain</a> holding the conditions that must be met in order for the field to be relevant (and shown in UI).</td>
</tr>
<tr>
<td>default</td>
<td>(optional) (mixed) Tells how to get the default value of the field. Can be either a value (of the same type than the one target by <code>type</code>) or a callable (string).</td>
</tr>
<tr>
<td>readonly</td>
<td>(boolean) Marks the field as non-editable (default = false).</td>
</tr>
<tr>
<td>required</td>
<td>(boolean) Marks the field as mandatory (trying to store an object without a value for that field raises error) (default = false).</td>
</tr>
<tr>
<td>multilang</td>
<td>(boolean) Marks the field as translatable (default = false).</td>
</tr>
<tr>
<td>onupdate</td>
<td>(optional, string) Name of the method to invoke when field is updated.<br/>Format: <code>package\Class::method</code><br />Signature : <code>public static function onupdateFieldName($orm, $oids, $values, $lang) {}</code></td>
</tr>
<tr>
<td>domain</td>
<td>(only relational fields, array) <a href="../../architecture-concepts/domains/">Domain</a> holding the additional conditions to apply on the set of objects targeted by the relation.</td>
</tr>
<tr>
<td>dependencies</td>
<td>(optional, array) list of computed fields (relative to current object or through relations traversal) that must be reset when the value of the field is updated. There must be a symmetrical 'depends_on' on targeted computed fields.</td>
</tr>
</tbody>
</table>
<h4 id="type-related-properties">Type-related properties<a class="headerlink" href="#type-related-properties" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th><strong>TYPE</strong></th>
<th><strong>ATTRIBUTE</strong></th>
<th><strong>USAGE</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>string</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>type</td>
<td>Type of the field. Accepted types are: <em>alias</em>, <em>computed</em>, <em>many2one</em>, <em>many2many</em>, <em>one2many</em>, <em>integer</em>, <em>string</em>, <em>float</em>, <em>boolean</em>, <em>text</em>, <em>date</em> and <em>datetime</em>.</td>
</tr>
<tr>
<td></td>
<td>multilang</td>
<td>(optional, boolean) Tells if field is <a href="../i18n/">translatable</a> (default = false)</td>
</tr>
<tr>
<td></td>
<td>selection</td>
<td>(optional, array) Pre-defined list or associative array holding the possible values for the field.   <a href="#anchor">Example</a></td>
</tr>
<tr>
<td><strong>alias</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>alias</td>
<td>(string) Targets another field whose value must be returned when fetching the field value. By default, the <code>name</code>field is an alias for the <code>id</code> field.</td>
</tr>
<tr>
<td><strong>many2one</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>foreign_object</td>
<td>Full name of the class toward which field is pointing back.</td>
</tr>
<tr>
<td></td>
<td>ondelete</td>
<td>Tells how to behave when the parent object is deleted.<br /><em>cascade</em>: delete the children  too.<br /><em>null</em> : void the pointer and keep the children.</td>
</tr>
<tr>
<td><strong>one2many</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>foreign_object</td>
<td>(string) Class toward which current field is pointing back.</td>
</tr>
<tr>
<td></td>
<td>foreign_field</td>
<td>(string) Name of the field of the pointed class that is pointing back toward the current class.</td>
</tr>
<tr>
<td></td>
<td>foreign_key</td>
<td>(optional, string) Name of the field that serves as identifier for objects pointed by the relation (default = 'id')</td>
</tr>
<tr>
<td></td>
<td>order</td>
<td>(optional) Name of the field pointed objects must be sorted on.</td>
</tr>
<tr>
<td></td>
<td>sort</td>
<td>(optional, string) direction fort sorting (possible values: 'asc', 'desc')</td>
</tr>
<tr>
<td></td>
<td>ondetach</td>
<td>(string [null, delete]) Tells how to handle the children objects when the relation is removed: either set the pointer to <code>null</code> or <code>delete</code> the children objects. (default = null)</td>
</tr>
<tr>
<td><strong>many2many</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>foreign_object</td>
<td>Full name of the class the relation points to.</td>
</tr>
<tr>
<td></td>
<td>foreign_field</td>
<td>Name of the field of the pointed class that is pointing back toward the current class.</td>
</tr>
<tr>
<td></td>
<td>rel_table</td>
<td>Name of the SQL table dedicated to the m2m relation (recommended syntax: <code>package_rel_class1_class2</code>)</td>
</tr>
<tr>
<td></td>
<td>rel_local_key</td>
<td>Name of the column in <code>rel_table</code> holding the identifier of the current object.</td>
</tr>
<tr>
<td></td>
<td>rel_foreign_key</td>
<td>Name of the column in de <code>rel_table</code> holding the identifier of the pointed object.</td>
</tr>
<tr>
<td><strong>computed</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>result_type</td>
<td>Specifies the type of the result returned by the field function, which can be any of the allowed types.</td>
</tr>
<tr>
<td></td>
<td>store</td>
<td>(optional) boolean telling if the result must be stored in database (in that case, the related table must contain a column for the field). By default, this attribute is set to <strong>false</strong>.</td>
</tr>
<tr>
<td></td>
<td>function</td>
<td>String holding the name of the method to invoke for computing the value of the field.<br /> Syntax: <code>method</code> (relative to current class) or <code>package\Class::method</code> (absolute notation)</td>
</tr>
<tr>
<td></td>
<td>multilang</td>
<td>(optional) Boolean flag telling if field can be translated (default value: false). This applies only for stored fields.</td>
</tr>
<tr>
<td></td>
<td>depends_on</td>
<td>(optional) Symetrical link allowing to check consistency of a class declaration (make sure that reverse inlinks are actually set)</td>
</tr>
</tbody>
</table>
<p><a name="anchor">Example of a basic field using the <code>selection</code> attribute:</a> </p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="s1">&#39;fieldname&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;type&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
    <span class="s1">&#39;selection&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;choice1&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;choice2&#39;</span><span class="p">,</span>
        <span class="s1">&#39;choice3&#39;</span>
    <span class="p">]</span>
<span class="p">]</span>
</code></pre></div>
<h2 id="system-fields">System fields<a class="headerlink" href="#system-fields" title="Permanent link">&para;</a></h2>
<p>Some fields are mandatory, and defined in the <code>Model</code> class.</p>
<table>
<thead>
<tr>
<th><strong>NAME</strong></th>
<th><strong>TYPE</strong></th>
<th><strong>ROLE</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Unique identifier of the object.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Name to use when referring to the object (in views). By default, this field is an alias of <code>id</code>.</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>'draft', 'instance', 'archive'.</td>
</tr>
<tr>
<td>created</td>
<td>datetime</td>
<td>Date at which the object was created.</td>
</tr>
<tr>
<td>creator</td>
<td>foreign_object</td>
<td><code>core\User</code></td>
</tr>
<tr>
<td>modified</td>
<td>datetime</td>
<td>Date date on which the object was last modified</td>
</tr>
<tr>
<td>modifier</td>
<td>foreign_object</td>
<td><code>core\User</code></td>
</tr>
<tr>
<td>deleted</td>
<td>boolean</td>
<td>Marks the object as soft-deleted.</td>
</tr>
</tbody>
</table>
<h2 id="getters-methods">Getters methods<a class="headerlink" href="#getters-methods" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th><strong>NAME</strong></th>
<th><strong>DESCRIPTION</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>getName()</td>
<td>Get Model readable name.</td>
</tr>
<tr>
<td>getDescription()</td>
<td>Get Model description.</td>
</tr>
<tr>
<td>getType()</td>
<td>Provide the list of unique rules (array of combinations of fields).</td>
</tr>
<tr>
<td>getLink()</td>
<td>Get the URL associated with the class.</td>
</tr>
<tr>
<td>getColumns()</td>
<td>Returns the user-defined part of the schema (i.e. fields list with types and other attributes).</td>
</tr>
<tr>
<td>getConstraints()</td>
<td>Returns a map of constraint items associating fields with validation functions.</td>
</tr>
<tr>
<td>getUnique()</td>
<td>Provide the list of unique rules (array of combinations of fields).</td>
</tr>
<tr>
<td>getFields()</td>
<td>Returns all fields names.</td>
</tr>
<tr>
<td>getValues()</td>
<td>Returns values of static instance.</td>
</tr>
<tr>
<td>getDefaults()</td>
<td>Return default values.</td>
</tr>
<tr>
<td>getTable()</td>
<td>Return the name of the DB table to be used for storing objects of current class.</td>
</tr>
</tbody>
</table>
<h2 id="overridable-methods">Overridable methods<a class="headerlink" href="#overridable-methods" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th><strong>NAME</strong></th>
<th><strong>DESCRIPTION</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cancreate()</td>
<td>Check wether an object can be created.</td>
</tr>
<tr>
<td>oncreate()</td>
<td>Hook invoked after object creation for performing object-specific additional operations.</td>
</tr>
<tr>
<td>canupdate()</td>
<td>Check wether an object can be updated.</td>
</tr>
<tr>
<td>onupdate()</td>
<td>Hook invoked before object update for performing object-specific additional operations.</td>
</tr>
<tr>
<td>candelete()</td>
<td>Check wether an object can be deleted.</td>
</tr>
<tr>
<td>ondelete()</td>
<td>Hook invoked before object deletion for performing object-specific additional operations.</td>
</tr>
<tr>
<td>canclone()</td>
<td>Check wether an object can be cloned.</td>
</tr>
<tr>
<td>onclone()</td>
<td>Hook invoked after object cloning for performing object-specific additional operations.</td>
</tr>
<tr>
<td>onchange()</td>
<td>Handler for virtual static methods: use classname to invoke a Collection method, if available.</td>
</tr>
</tbody>
</table>
<h1 id="custom-methods">Custom methods<a class="headerlink" href="#custom-methods" title="Permanent link">&para;</a></h1>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../directory-structure/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Directory Structure" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Directory Structure
            </div>
          </div>
        </a>
      
      
        
        <a href="../controllers/" class="md-footer__link md-footer__link--next" aria-label="Next: Controllers" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Controllers
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"method": "mike", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>